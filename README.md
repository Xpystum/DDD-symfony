# Чистая архитектура в Symfony-проекте

**Чистая архитектура** (Clean Architecture) — это подход к построению программных систем, основанный на разделении приложения на независимые слои с чётко определёнными зависимостями. В этой архитектуре зависимости всегда направлены “внутрь”, а внешний код никогда не влияет на бизнес-логику.

---

## Основные слои приложения

### 1. `src/Domain` — Доменный слой

- **Суть:** Здесь живёт бизнес-логика и сущности (entities). Этот слой описывает основные правила и инварианты вашей предметной области.
- **Особенности:**  
  - Не зависит от фреймворков, баз данных, внешних сервисов.
  - Содержит только чистый PHP-код: сущности, value-объекты, интерфейсы репозиториев и сервисов.

---

### 2. `src/Application` — Слой вариантов использования (Use Cases)

- **Суть:** Описывает сценарии использования приложения через сервисы, которые управляют потоком данных между слоями.
- **Особенности:**  
  - Не знает ничего о технических деталях реализации.
  - Использует интерфейсы, определённые в доменном слое.
  - Управляет взаимодействием между бизнес-логикой и внешним миром.

---

### 3. `src/Infrastructure` — Инфраструктурный слой

- **Суть:** Реализует технические детали — адаптеры, контроллеры, реализации репозиториев, интеграции с внешними сервисами.
- **Особенности:**  
  - Преобразует входящие данные (например, HTTP-запросы) в объекты домена.
  - Реализует интерфейсы, определённые в домене.
  - Содержит код, зависящий от фреймворков и библиотек.

---

### 4. Внешний слой — Frameworks & Drivers

- **Суть:** Всё, что связано с настройкой окружения и внешними инструментами: Composer, конфигурация базы данных, шаблонизаторы (Twig) и другое.
- **Особенности:**  
  - Зависит от выбранного стека и среды выполнения.
  - Не содержит бизнес-логики.

---

## Схема зависимостей

```
Frameworks & Drivers
         ↓
Infrastructure
         ↓
Application (Use Cases)
         ↓
Domain
```
> Все зависимости направлены внутрь. Внешние слои зависят от внутренних, но не наоборот.

---

## Преимущества чистой архитектуры

- **Гибкость:** Бизнес-логику можно переносить между проектами или менять инфраструктуру без затрагивания ядра.
- **Тестируемость:** Легко тестировать бизнес-логику изолированно от технических деталей.
- **Масштабируемость:** Упрощает развитие и поддержку проекта.

---

## Использование в Symfony

В структуре Symfony-проекта часто принято размещать слои в отдельных директориях внутри `src/`:

- `src/Domain` — бизнес-логика и интерфейсы
- `src/Application` — сервисы и use cases
- `src/Infrastructure` — контроллеры, реализации репозиториев, интеграции
- Внешние настройки и зависимости — на уровне настройки приложения (composer, config, twig и т.д.)

---

**Чистая архитектура позволяет создавать масштабируемые, поддерживаемые и легко тестируемые приложения, в которых бизнес-логика не зависит от технических деталей.**
